#!/bin/bash
for machine_ip in 172.30.1.11 172.30.1.12 172.30.1.13 172.30.1.15 172.30.1.21 172.30.1.22 172.30.1.23 172.30.1.25 172.30.1.31 172.30.1.32 172.30.1.33 172.30.1.35 172.30.1.41 172.30.1.42 172.30.1.43 172.30.1.45 172.30.1.51 172.30.1.52 172.30.1.53 172.30.1.55 172.30.1.61 172.30.1.62 172.30.1.63 172.30.1.65 172.30.1.71 172.30.1.72 172.30.1.73 172.30.1.75 172.30.1.81 172.30.1.82 172.30.1.83 172.30.1.85 172.30.1.91 172.30.1.92 172.30.1.93 172.30.1.95 172.30.1.101 172.30.1.102 172.30.1.103 172.30.1.105 172.30.1.111 172.30.1.112 172.30.1.113 172.30.1.115 172.30.1.121 172.30.1.122 172.30.1.123 172.30.1.125 172.30.1.131 172.30.1.132 172.30.1.133 172.30.1.135 172.30.1.141 172.30.1.142 172.30.1.143 172.30.1.145 172.30.1.151 172.30.1.152 172.30.1.153 172.30.1.155 172.30.1.161 172.30.1.162 172.30.1.163 172.30.1.165 172.30.1.171 172.30.1.172 172.30.1.173 172.30.1.175 172.30.1.181 172.30.1.182 172.30.1.183 172.30.1.185 172.30.1.191 172.30.1.192 172.30.1.193 172.30.1.195 172.30.1.201 172.30.1.202 172.30.1.203 172.30.1.205 172.30.1.211 172.30.1.212 172.30.1.213 172.30.1.215 172.30.1.221 172.30.1.222 172.30.1.223 172.30.1.225 172.30.1.231 172.30.1.232 172.30.1.233 172.30.1.235; do
  flag1=$(openssl rand -hex 16)
  flag2=$(openssl rand -hex 16)
  sshpass -p 'youshouldnthavethispassword' ssh -o StrictHostKeyChecking=no ansible@$machine_ip "echo $flag1 > /tmp/flag.txt"
  sshpass -p 'youshouldnthavethispassword' ssh -o StrictHostKeyChecking=no ansible@$machine_ip "echo 'youshouldnthavethispassword' | sudo -S sh -c 'echo $flag2 > /root/flag.txt'"
  python3 /app/update_flags.py "$machine_ip" "$flag1" "$flag2"
done
